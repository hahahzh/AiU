%{
    if(_object) {
        currentObject = _object
        currentType = _('controllers.CRUD$ObjectType').forClass(_object.getClass().getName())
    } else if(_class) {
        currentObject = null;
        currentType = _('controllers.CRUD$ObjectType').forClass(_class)
    } else {
        currentObject = _caller.object
        currentType = _caller.type
    }

    // Eval fields tags
    def fieldsHandler = [:]
    if(_body) {
        _body.setProperty('fieldsHandler', fieldsHandler);
        _body.toString(); // we skeep the real result ...
    }
}%
%{ def field = currentType.getField(fieldName) }%

<div class="crudField crud_text">
        #{field 'mtype'}
            #{crud.numberField name:'mtype', value:(_caller.mtype? _caller.mtype :(currentObject ? currentObject['mtype'] : null)) /}
            %{ am = 'crud.help.numeric' }%
        #{/field}
</div>

<div class="crudField crud_text">
	<input type="text" value="${currentObject['game']}" name="game_show" readonly="readonly">
	<input type="hidden" value="${currentObject['game'].id}" name="game">
</div>

<div class="crudField crud_relation">
	#{field 'object.ct'}
    	<label for="ct">
           &{'ct'}
       	</label>
       <select name="selName" id="selName" >
        	<option value="" >请选择...</option>
	        #{list items:controllers.GameCarousels.findSimpleCarouselType(), as:'c'}
	        		<option value="${c.type}" ${c.type == _caller?.selval? 'selected="true"'.raw() : ''}>${c}</option>
	        #{/list}
        </select>
           <input type="button" value="查询" onclick="change1()"/>
  	#{/field}
</div>